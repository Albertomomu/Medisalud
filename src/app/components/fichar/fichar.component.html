<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/principal"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<div class="ion-page" id="main-content" main>
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>Hola, {{user.displayName}}</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <div class="ion-padding">
      <ion-datetime locale="es-ES"></ion-datetime>
    </div>
    <ion-button expand="block" size="medium" (click)="[fichar(),presentAlert()]">
      Fichar
    </ion-button>
    <ion-button expand="block" size="medium" (click)="[mostrarFichadas(), setOpen(true)]">
      Ver fichadas
    </ion-button> 

    <ion-modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Fichadas</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content>
          <div>
            <div *ngFor="let group of groupedByDate | keyvalue | reverse let i = index" class="ion-margin-top">
              <h4 class="ion-text-center ">{{group.key}}</h4>
              <div *ngFor="let fic of group.value | keyvalue let i = index">
                <ion-list lines="full">
                  <ion-item [ngClass]="(i % 2 === 0) ? 'odd' : 'even'">{{fic.value.date}} {{fic.value.hour}} - {{fic.value.estado}}</ion-item>
                </ion-list>
              </div>
              <!-- <ion-list lines="full">
                <ion-item [ngClass]="(i % 2 === 0) ? 'odd' : 'even'">{{fichada.date}} {{fichada.hour}} - {{fichada.estado}}</ion-item>
              </ion-list> -->
            </div>
          </div>
        </ion-content>
      </ng-template>
    </ion-modal>
  </ion-content>
</div>